Bootstrap: docker
From: continuumio/miniconda3:4.7.12

%labels

  Author "Francesco Tabaro"
  Institution "Tampere University"
  Version v1.0

%help

  A container to run RRBS data analysis

%environment

  export LC_ALL=C
  export PATH="/opt/conda/bin:$PATH"

%post
    export PATH="/opt/conda/bin:$PATH"
    apt-get -qq update
    apt-get -qq install -q r-base pigz rsync

    R -e "install.packages('BiocManager', repos = 'https://cloud.r-project.org')"
    R -e "library(BiocManager); install(c('methylKit', 'genomation'), version='3.8')"

    conda install -c conda-forge pyaml=19.4.1
    conda install -c bioconda bismark=0.22.2
    conda install -c bioconda trim-galore=0.6.4
    conda install -c bioconda fastqc=0.11.8
    conda install -c bioconda samtools=1.9
    conda install -c iuc ucsc_tools=357